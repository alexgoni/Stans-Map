import Viewer from "@/components/handler/cesium/Viewer";
import React, { useEffect } from "react";
import * as Cesium from "cesium";
import * as turf from "@turf/turf";

export default function Test() {
  useEffect(() => {
    const viewer = Viewer();

    // const bluePolygon = viewer.entities.add({
    //   name: "Blue polygon with holes",
    //   polygon: {
    //     hierarchy: {
    //       positions: Cesium.Cartesian3.fromDegreesArray([
    //         127.08077126797158, 37.63543002833842, 127.08103194520605,
    //         37.6351099476026, 127.08078633310396, 37.63502924480529,
    //         127.08118807550566, 37.63491823775421, 127.08129012938697,
    //         37.63479292745789, 127.08128345460675, 37.6346654242487,
    //         127.0811203221944, 37.6344137714437, 127.08127832910316,
    //         37.63456751568295, 127.08127800595774, 37.634561341771445,
    //         127.08140283399514, 37.634654539307824, 127.08169482412742,
    //         37.63429600879833, 127.08207992654512, 37.63467180667764,
    //         127.08251739975846, 37.63455092656554, 127.0822481752248,
    //         37.63483599026546, 127.08283228749322, 37.63540598967158,
    //         127.08203798208147, 37.63582938327491, 127.08174167470321,
    //         37.63537228939446, 127.08134258067066, 37.63579486300117,
    //         127.08132107944824, 37.635384142747654, 127.08077126797158,
    //         37.63543002833842,
    //       ]),
    //       holes: [
    //         {
    //           positions: Cesium.Cartesian3.fromDegreesArray([
    //             127.08132107944824, 37.635384142747654, 127.08131153459863,
    //             37.63520181480376, 127.08103194520605, 37.6351099476026,
    //             127.08118807550566, 37.63491823775421, 127.08129514066886,
    //             37.6348886541329, 127.08129012938697, 37.63479292745789,
    //             127.08133243431341, 37.634740981928815, 127.08128345460675,
    //             37.6346654242487, 127.08127832910316, 37.63456751568295,
    //             127.08138733029153, 37.63467357605264, 127.08140283399514,
    //             37.634654539307824, 127.08160261202251, 37.6348036954421,
    //             127.08207992654512, 37.63467180667764, 127.0822481752248,
    //             37.63483599026546, 127.08199910116937, 37.635099717928696,
    //             127.08227358277827, 37.63530464869003, 127.0820546774506,
    //             37.63532291838963, 127.08224566153307, 37.63550874947144,
    //             127.08176267755044, 37.635350050900705, 127.08174167470321,
    //             37.63537228939446, 127.081727377503, 37.635350234070856,
    //             127.08132107944824, 37.635384142747654,
    //           ]),
    //         },
    //       ],
    //     },

    //     material: Cesium.Color.BLUE.withAlpha(0.5),
    //     height: 0,
    //     outline: true, // height is required for outline to display
    //   },
    // });

    // const bluePolygon2 = viewer.entities.add({
    //   name: "Blue polygon with holes",
    //   polygon: {
    //     hierarchy: {
    //       positions: Cesium.Cartesian3.fromDegreesArray([
    //         127.081727377503, 37.635350234070856, 127.08171767280253,
    //         37.63533526328593, 127.08131153459863, 37.63520181480376,
    //         127.08129514066886, 37.6348886541329, 127.08140795464357,
    //         37.6348574820335, 127.08133243431341, 37.634740981928815,
    //         127.08138733029153, 37.63467357605264, 127.08153909491955,
    //         37.634821246117454, 127.08160261202251, 37.6348036954421,
    //         127.08199910116937, 37.635099717928696, 127.08191586500966,
    //         37.63518785106585, 127.0820546774506, 37.63532291838963,
    //         127.08176551019366, 37.635347051606466, 127.08176267755044,
    //         37.635350050900705, 127.08175597210658, 37.635347847632715,
    //         127.081727377503, 37.635350234070856,
    //       ]),
    //       holes: [
    //         {
    //           positions: Cesium.Cartesian3.fromDegreesArray([
    //             127.08175597210658, 37.635347847632715, 127.08171767280253,
    //             37.63533526328593, 127.08140795464357, 37.6348574820335,
    //             127.08153909491955, 37.634821246117454, 127.08191586500966,
    //             37.63518785106585, 127.08176551019366, 37.635347051606466,
    //             127.08175597210658, 37.635347847632715,
    //           ]),
    //         },
    //       ],
    //     },

    //     material: Cesium.Color.BLUE.withAlpha(0.5),
    //     height: 0,
    //     outline: true, // height is required for outline to display
    //   },
    // });

    // viewer.zoomTo(bluePolygon);

    const bluePolygon = viewer.entities.add({
      name: "Blue polygon with holes",
      polygon: {
        hierarchy: {
          positions: Cesium.Cartesian3.fromDegreesArray([
            -116.34951656548492, 39.98812761229735, -106.69855418139537,
            39.99059239842368, -103.36261490480987, 49.85429244402629,
            -99.76004656859124, 39.99236444318157, -87.2367854047257,
            39.995562793682204, -97.88849644308372, 34.86904938981598,
            -95.68719128173251, 28.843039337243187, -102.62911777605272,
            32.58745737904865, -110.48027356317968, 28.808810433632352,
            -108.18820840046847, 35.58598512882028, -116.34951656548492,
            39.98812761229735,
          ]),
          holes: [
            {
              positions: Cesium.Cartesian3.fromDegreesArray([
                -106.69855418139537, 39.99059239842368, -99.76004656859124,
                39.99236444318157, -97.88849644308372, 34.86904938981598,
                -102.62911777605272, 32.58745737904865, -108.18820840046847,
                35.58598512882028, -106.69855418139537, 39.99059239842368,
              ]),
            },
          ],
        },
        material: Cesium.Color.BLUE.withAlpha(0.5),
        height: 0,
        outline: true, // height is required for outline to display
      },
    });

    const coordinates = [
      [-116.34951656548492, 39.98812761229735],
      [-106.69855418139537, 39.99059239842368],
      [-103.36261490480987, 49.85429244402629],
      [-99.76004656859124, 39.99236444318157],
      [-87.2367854047257, 39.995562793682204],
      [-97.88849644308372, 34.86904938981598],
      [-95.68719128173251, 28.843039337243187],
      [-102.62911777605272, 32.58745737904865],
      [-110.48027356317968, 28.808810433632352],
      [-108.18820840046847, 35.58598512882028],
      [-116.34951656548492, 39.98812761229735],
    ];

    const holeCoordinates = [
      [-106.69855418139537, 39.99059239842368],
      [-99.76004656859124, 39.99236444318157],
      [-97.88849644308372, 34.86904938981598],
      [-102.62911777605272, 32.58745737904865],
      [-108.18820840046847, 35.58598512882028],
      [-106.69855418139537, 39.99059239842368],
    ];

    const polygonWithHole = turf.polygon([coordinates, holeCoordinates]);

    const areaWithHole = turf.area(polygonWithHole);

    let tot = 0;

    const polygon1 = turf.polygon([
      [
        [-116.34951656548492, 39.98812761229735],
        [-106.69855418139537, 39.99059239842368],
        [-108.18820840046847, 35.58598512882028],
        [-116.34951656548492, 39.98812761229735],
      ],
    ]);
    const area1 = turf.area(polygon1);
    tot += area1;

    const polygon2 = turf.polygon([
      [
        [-106.69855418139537, 39.99059239842368],
        [-103.36261490480987, 49.85429244402629],
        [-99.76004656859124, 39.99236444318157],
        [-106.69855418139537, 39.99059239842368],
      ],
    ]);
    const area2 = turf.area(polygon2);
    tot += area2;

    const polygon3 = turf.polygon([
      [
        [-99.76004656859124, 39.99236444318157],
        [-87.2367854047257, 39.995562793682204],
        [-97.88849644308372, 34.86904938981598],
        [-99.76004656859124, 39.99236444318157],
      ],
    ]);
    const area3 = turf.area(polygon3);
    tot += area3;

    const polygon4 = turf.polygon([
      [
        [-97.88849644308372, 34.86904938981598],
        [-95.68719128173251, 28.843039337243187],
        [-102.62911777605272, 32.58745737904865],
        [-97.88849644308372, 34.86904938981598],
      ],
    ]);
    const area4 = turf.area(polygon4);
    tot += area4;

    const polygon5 = turf.polygon([
      [
        [-102.62911777605272, 32.58745737904865],
        [-110.48027356317968, 28.808810433632352],
        [-108.18820840046847, 35.58598512882028],
        [-102.62911777605272, 32.58745737904865],
      ],
    ]);
    const area5 = turf.area(polygon5);
    tot += area5;

    console.log(`다각형의 넓이는 ${areaWithHole} 제곱 미터입니다.`);
    console.log(tot);

    return () => {
      viewer.destroy();
    };
  }, []);

  return <></>;
}
